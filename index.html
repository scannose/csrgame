<!DOCTYPE html>
<html>
  <head>
    <title>csrgame beta v0</title>
    <script>
      let csr = {
        iq: 0,
        books: 0,
        school: false
      };
      
      const stupidround = value => {
        value *= 100;
        value = Math.round(value);
        value /= 100;
        return value;
      };
      
      const ezdom = (id, value, attribute = "innerHTML") => {
        document.getElementById(id)[attribute] = value;
      };
      
      const update_ui = () => {
        ezdom("iq", "iq: " + stupidround(csr.iq));
        ezdom("books", "books: " + stupidround(csr.books));
        ezdom("books", csr.iq < 10 * 1.15 ** csr.books, "disabled");
        ezdom("unlock_school", csr.iq < 1000, "disabled");
        ezdom("unlock_school", csr.school, "hidden");
        ezdom("school", !csr.school, "hidden");
      };
      
      const buy_book = () => {
        csr.iq -= 10 * 1.15 ** csr.books;
        csr.books++;
        update_ui();
      };
      
      const unlock_school = () => {
        csr.iq -= 1000;
        csr.school = true;
        update_ui();
      };
      
      const update = () => {
        setTimeout(update, 100);
        csr.iq += 0.1 + csr.books * 0.03;
        update_ui();
      };
      setTimeout(update, 100);
    </script>
  </head>
  <body>
    <div id = "home">
      <p id = "iq">iq: 0</p>
      <button id = "books" onclick = "buy_book()">books: 0</button>
      <p>Reading a book gives you 0.3 iq/s. The first book requires 10 iq to understand and each book is 1.15x harder to understand than the last one.</p>
      <button id = "unlock_school" onclick = "unlock_school()">start going to school (1000 iq)</button>
    </div>
    <div id = "school" hidden = "true">
      <p>tbd</p>
    </div>
    <div id = "achievements">
      <p>tbd</p>
    </div>
  </body>
</html>
