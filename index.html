<!DOCTYPE html>
<html>
  <head>
    <title>csrgame beta v0</title>
    <script>
      let csr = {
        iq: 0,
        knowledge: 0,
        books: 0,
        strats: 0,
        notes: 0,
        school: false,
        week: 0
      };
      
      const stupidround = value => {
        value *= 100;
        value = Math.round(value);
        value /= 100;
        return value;
      };
      
      const ezdom = (id, value, attribute = "innerHTML") => {
        document.getElementById(id)[attribute] = value;
      };
      
      const update_ui = () => {
        ezdom("iq", "iq: " + stupidround(csr.iq));
        ezdom("knowledge", "knowledge: " + stupidround(csr.knowledge));
        ezdom("books", "books: " + csr.books + " (" + stupidround(10 * 1.15 ** csr.books) + " iq)");
        ezdom("strats", "strats: " + csr.strats + " (" + stupidround(100 * 1.15 ** csr.strats) + " iq)");
        ezdom("notes", "notes: " + csr.notes +  + " (" + stupidround(50 * 1.15 ** csr.notes) + " iq)");
        ezdom("books", csr.iq < 10 * 1.15 ** csr.books, "disabled");
        ezdom("strats", csr.iq < 100 * 1.25 ** csr.strats, "disabled");
        ezdom("notes", csr.iq < 50 * (1.15 - csr.week * 0.03) ** csr.notes, "disabled");
        ezdom("unlock_school", csr.iq < 1000, "disabled");
        ezdom("unlock_school", csr.school, "hidden");
        ezdom("school", !csr.school, "hidden");
        ezdom("hw", "finish your homework (" + 500 * 3 ** csr.week + " knowledge)");
        ezdom("hw", csr.knowledge < 500 * 3 ** csr.week, "disabled");
      };
      
      const buy_book = () => {
        csr.iq -= 10 * 1.15 ** csr.books;
        csr.books++;
        update_ui();
      };
      
      const buy_strat = () => {
        csr.iq -= 100 * 1.25 ** csr.strats;
        csr.strats++;
        update_ui();
      };
      
      const buy_note = () => {
        csr.iq -= 50 * (1.15 - csr.week * 0.03) ** csr.notes;
        csr.notes++;
        update_ui();
      };
      
      const unlock_school = () => {
        csr.iq -= 1000;
        csr.school = true;
        update_ui();
      };
      
      const finish_hw = () => {
        csr.knowledge = 0;
        csr.notes = 0;
        csr.week++;
        update_ui();
      };
      
      const update = () => {
        setTimeout(update, 100);
        csr.iq += (0.1 + csr.books * 0.03 * (1 + csr.strats * 0.2)) * (2 ** csr.week);
        csr.knowledge += csr.notes * 0.02 * (2 ** csr.week);
        update_ui();
      };
      setTimeout(update, 100);
    </script>
  </head>
  <body>
    <div id = "home">
      <p id = "iq">iq: 0</p>
      <button id = "books" onclick = "buy_book()" disabled = "true">books: 0 (10 iq)</button>
      <p>Reading a book gives you 0.3 iq/s. The first book requires 10 iq to understand and each book is 1.15x harder to understand than the last one.</p>
      <button id = "strats" onclick = "buy_strat()" disabled = "true">strats: 0 (100 iq)</button>
      <p>Thinking of a stratergy makes you understand books 20% deeper! It takes 100 iq to think of the first strat and each one after the first one is 1.25x harder to think of.</p>
      <button id = "unlock_school" onclick = "unlock_school()">start going to school (1000 iq)</button>
    </div>
    <div id = "school" hidden = "true">
      <p id = "knowledge">knowledge: 0</p>
      <button id = "notes" onclick = "buy_note()" disabled = "true">notes: 0 (50 iq)</button>
      <p>Taking down notes give you knowledge (0.2/s each). You need 50 iq to write the first one and the iq cost increases by x1.15 each time you write another one.</p>
      <button id = "hw" onclick = "finish_hw()" disabled = "true">finish your homework (500 knowledge)</button>
      <p>Finishing your homework and turning it in will wipe out everything you got in school and make you progress into the next week.<br>
        2 lazy to write hw effects for now dig through the code to find out lol btw it will be changed in the next update</p>
    </div>
    <div id = "achievements">
      <p>tbd</p>
    </div>
  </body>
</html>
